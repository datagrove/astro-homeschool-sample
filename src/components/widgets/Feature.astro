---
import { getCollection } from 'astro:content';
import { createSignal } from 'solid-js';

const features = await getCollection('features', ({ data }) => {
    return data.draft !== true;
})

// let testBtnNum = 0;

let { testBtnNum = 0 } = Astro.props;

let currBtnIdFront = testBtnNum;
---

<div data-message={ testBtnNum } class="bg-feature-img bg-cover shadow h-64 mt-12 mb-4 mx-4 p-4">
    <!-- <img 
        src="../../../../public/images/3dprinter.jpg" 
        alt="Children looking at a 3D printer"
        class="absolute opacity-20"
    /> -->
    
    <div class="md:w-2/3 flex flex-col justify-start h-5/6 pb-10">
        <div class="h-1/4 md:h-2/3">
            
        </div>
        
        <div id="feature0" class="inline h-3/4 md:h-1/3">
            <h1 class="text-xl pb-2" set:html={ features[0].data.title }/>
            <p class="italic text-sm" set:html={ features[0].data.description } />
        </div>

        <div id="feature1" class="hidden h-3/4 md:h-1/3">
            <h1 class="text-xl pb-2" set:html={ features[1].data.title }/>
            <p class="italic text-sm" set:html={ features[1].data.description } />
        </div>

        <div id="feature2" class="hidden h-3/4 md:h-1/3">
            <h1 class="text-xl pb-2" set:html={ features[2].data.title }/>
            <p class="italic text-sm" set:html={ features[2].data.description } />
        </div>
    </div>

    <div class="flex h-1/6">
        <button 
            id=0 
            class="rounded-full bg-dgPrimary w-10 h-10 px-4 mr-2"
        >
            <p class="text-white">1</p>
        </button>        
        
        <button 
            id=1 
            class="rounded-full bg-dgPrimary w-10 h-10 px-4 mr-2"
        >
            <p class="text-white">2</p>
        </button>
        
        <button 
            id=2 
            class="rounded-full bg-dgPrimary w-10 h-10 px-4 mr-2"
        >
            <p class="text-white">3</p>
        </button>
    </div>

    <!-- <div>
        <button class="btnLeft">Left</button>
        <button class="btnRight">Right</button>
    </div> -->

    <div class="md:w-1/3">

    </div>
</div>

<script>
    import { createSignal } from 'solid-js';

    const [btnNum, setBtnNum] = createSignal("0");
    const buttons = document.querySelectorAll('button');

    let currBtnId;

    const btn0 = document.getElementById("0");
    const btn1 = document.getElementById("1");
    const btn2 = document.getElementById("2");
    const ftr0 = document.getElementById("feature0");
    const ftr1 = document.getElementById("feature1");
    const ftr2 = document.getElementById("feature2");

    const btnLeft = document.querySelector("btnLeft");
    const btnRight = document.querySelector("btnRight");
    // alert(testBtnNum);

    buttons.forEach((button) => {
        button.addEventListener('click', () => {
            setBtnNum(button.id);
            currBtnId = Number(btnNum());
            console.log("currBtnId: ", currBtnId)
            // alert(btnNum())

            if(currBtnId == 0) {
                ftr0?.classList.add('inline');
                ftr0?.classList.remove("hidden");
                ftr1?.classList.remove("inline");
                ftr1?.classList.add("hidden");
                ftr2?.classList.remove("inline");
                ftr2?.classList.add("hidden");
            } else if(currBtnId == 1) {
                ftr1?.classList.remove('hidden');
                ftr1?.classList.add("inline");
                ftr0?.classList.remove("inline");
                ftr0?.classList.add("hidden");
                ftr2?.classList.remove("inline");
                ftr2?.classList.add("hidden");
            } else {
                ftr2?.classList.add("inline");
                ftr2?.classList.remove("hidden");
                ftr1?.classList.remove("inline");
                ftr1?.classList.add("hidden");
                ftr0?.classList.remove("inline");
                ftr0?.classList.add("hidden");
            }
        });
    });

</script>